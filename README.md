# üéØ FlowBot - Telegram Bot –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

> –ù–∞—É—á–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤—Ö–æ–¥–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –∑–∞ 30 –¥–Ω–µ–π

## üìã –û –ø—Ä–æ–µ–∫—Ç–µ

FlowBot - —ç—Ç–æ Telegram-–±–æ—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —Ç–µ—Ö–Ω–∏–∫—É Flow List –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ª–∏—á–Ω–æ–π –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö –Ω–µ–π—Ä–æ–±–∏–æ–ª–æ–≥–∏–∏ –¥–æ—Ñ–∞–º–∏–Ω–æ–≤–æ–π –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –∏ —Ç–µ–æ—Ä–∏–∏ –ø–æ—Ç–æ–∫–∞ –ú–∏—Ö–∞—è –ß–∏–∫—Å–µ–Ω—Ç–º–∏—Ö–∞–π–∏.

### üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **30-–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞** –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ç–æ–∫–∞
- **AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á** –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–¥ —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è** —Å–æ —Å—Ç—Ä–∏–∫–∞–º–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** —Å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º–∏ –∏–Ω—Å–∞–π—Ç–∞–º–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** —Å Notion, Google Calendar (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- PostgreSQL (—á–µ—Ä–µ–∑ Supabase)
- Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- Telegram Bot Token
- OpenAI API Key

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
git clone https://github.com/yourusername/flowbot.git
cd flowbot
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
```bash
npm install
```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –∫–ª—é—á–∞–º–∏
```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Supabase**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ https://supabase.com
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ SQL Editor:
# 1. database/migrations/001_initial_schema.sql
# 2. database/migrations/002_seed_achievements.sql
```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**
```bash
# Production
npm start

# Development (—Å hot-reload)
npm run dev
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/botfather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env` —Ñ–∞–π–ª

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [Supabase](https://supabase.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ SQL Editor
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑ –ø–∞–ø–∫–∏ `database/migrations/`
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –∏ –∫–ª—é—á–∏ –≤ `.env`

### –ü–æ–ª—É—á–µ–Ω–∏–µ OpenAI API Key

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [OpenAI](https://platform.openai.com)
2. –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á
3. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ `.env`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
flowbot/
‚îú‚îÄ‚îÄ bot/                  # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ index.js         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ handlers/        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/       # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ utils/          # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ services/       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ aiService.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ taskService.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ userService.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ notificationService.js  # Cron-based notifications
‚îÇ   ‚îú‚îÄ‚îÄ handlers/       # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ api/           # API endpoints –¥–ª—è webhooks
‚îú‚îÄ‚îÄ database/           # –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å—Ö–µ–º–∞ –ë–î
‚îú‚îÄ‚îÄ config/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ tests/            # –¢–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ docs/            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## ü§ñ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- `/tasks` - –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–¥–∞—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
- `/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `/settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `/help` - –°–ø—Ä–∞–≤–∫–∞

## üìä –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π

### –î–Ω–∏ 1-5: –†–∞–∑–≥–æ–Ω
- 25 –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á + 5 —Å—Ä–µ–¥–Ω–∏—Ö
- –ê–∫—Ç–∏–≤–∞—Ü–∏—è –¥–æ—Ñ–∞–º–∏–Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏

### –î–Ω–∏ 6-10: –£—Å–ª–æ–∂–Ω–µ–Ω–∏–µ
- 15 –ø—Ä–æ—Å—Ç—ã—Ö + 10 —Å—Ä–µ–¥–Ω–∏—Ö + 5 —Å–ª–æ–∂–Ω—ã—Ö
- –£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –†–æ—Å—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏

### –î–Ω–∏ 11-30: –ü–æ—Ç–æ–∫ (4 –ø—è—Ç–∏–¥–Ω–µ–≤–∫–∏)
- 10 –ø—Ä–æ—Å—Ç—ã—Ö + 10 —Å—Ä–µ–¥–Ω–∏—Ö + 10 —Å–ª–æ–∂–Ω—ã—Ö
- –£—Å—Ç–æ–π—á–∏–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ç–æ–∫–∞
- –ö–∞–∂–¥—ã–µ 5 –¥–Ω–µ–π (11-15, 16-20, 21-25, 26-30) –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ø–∞—Ç—Ç–µ—Ä–Ω —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### –î–µ–Ω—å 31+: –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –ø—É—Ç–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ—Ç–∞
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω –¥–Ω–µ–π 11-30
- –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## üíé –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç 30+ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:
- üéØ **–ü–µ—Ä–≤—ã–π —à–∞–≥** - –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ –≤ –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å
- üî• **–ù–µ–¥–µ–ª—è –≤ –ø–æ—Ç–æ–∫–µ** - 7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥
- üöÄ **–õ–µ–≥–µ–Ω–¥–∞ –¥–Ω—è** - –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ 30 –∑–∞–¥–∞—á
- üëë **–ú–∞—Å—Ç–µ—Ä –ø–æ—Ç–æ–∫–∞** - –ó–∞–≤–µ—Ä—à–∏—Ç—å 30-–¥–Ω–µ–≤–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
npm test
```

### –õ–∏–Ω—Ç–∏–Ω–≥
```bash
npm run lint
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
npm run format
```

## üöÄ –î–µ–ø–ª–æ–π

### VPS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ë–æ—Ç —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç –Ω–∞ VPS —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –¥–µ–ø–ª–æ–µ–º —á–µ—Ä–µ–∑ GitHub webhooks.

**–¢–µ–∫—É—â–∏–π –¥–µ–ø–ª–æ–π:**
- VPS: Ubuntu 22.04.5 LTS (5.129.224.93)
- Node.js 18.20.8 (—á–µ—Ä–µ–∑ nvm)
- PM2 6.0.13 –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- GitHub webhook –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ VPS:**
```
/root/flowbot/           # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
/root/flowbot/ecosystem.config.js  # PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
/root/webhook/           # Webhook listener
```

**–ü—Ä–æ—Ü–µ—Å—Å—ã PM2:**
- `flowbot` - –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç-–ø—Ä–æ—Ü–µ—Å—Å
- `webhook` - —Å–ª—É—à–∞—Ç–µ–ª—å GitHub webhooks –Ω–∞ –ø–æ—Ä—Ç—É 3000

#### –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ VPS

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js —á–µ—Ä–µ–∑ nvm**
```bash
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.0/install.sh | bash
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
nvm install 18
nvm use 18
nvm alias default 18
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PM2 –∏ Git**
```bash
npm install -g pm2
apt-get update && apt-get install -y git
```

3. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
cd /root
git clone https://github.com/AlekseyRodkin/flowbot.git
cd flowbot
npm install
```

4. **–°–æ–∑–¥–∞–π—Ç–µ ecosystem.config.js**
```javascript
module.exports = {
  apps: [{
    name: 'flowbot',
    script: 'bot/index.js',
    cwd: '/root/flowbot',
    instances: 1,
    autorestart: true,
    watch: false,
    max_memory_restart: '1G',
    env: {
      TELEGRAM_BOT_TOKEN: '–≤–∞—à_—Ç–æ–∫–µ–Ω',
      TELEGRAM_BOT_USERNAME: 'FlowList_Bot',
      SUPABASE_URL: '–≤–∞—à_supabase_url',
      SUPABASE_SERVICE_KEY: '–≤–∞—à_service_key',
      SUPABASE_ANON_KEY: '–≤–∞—à_anon_key',
      OPENAI_API_KEY: '–≤–∞—à_openai_key',
      OPENAI_MODEL: 'gpt-4o-mini',
      NODE_ENV: 'production',
      LOG_LEVEL: 'info',
      DEFAULT_TIMEZONE: 'Europe/Moscow',
      ADMIN_TELEGRAM_IDS: '–≤–∞—à_telegram_id',
      ADMIN_TELEGRAM_ID: '–≤–∞—à_telegram_id',
      ENABLE_AI_GENERATION: 'true',
      ENABLE_PAYMENTS: 'false',
      ENABLE_ANALYTICS: 'false',
      MAX_DAILY_TASKS: '30',
      BOT_USERNAME: 'FlowList_Bot'
    }
  }]
};
```

5. **–°–æ–∑–¥–∞–π—Ç–µ webhook listener**
```bash
mkdir -p /root/webhook
cd /root/webhook
npm init -y
npm install express
```

–°–æ–∑–¥–∞–π—Ç–µ `/root/webhook/index.js`:
```javascript
const express = require("express");
const { exec } = require("child_process");
const app = express();

app.use(express.json());

app.post("/webhook", (req, res) => {
  console.log("üì• Received GitHub webhook:", new Date().toISOString());

  const command = "cd /root/flowbot && git pull && export NVM_DIR=\"$HOME/.nvm\" && [ -s \"$NVM_DIR/nvm.sh\" ] && . \"$NVM_DIR/nvm.sh\" && npm install && pm2 restart ecosystem.config.js";

  exec(command, (error, stdout, stderr) => {
    if (error) {
      console.error("‚ùå Deployment error:", error);
      return res.status(500).json({ success: false, error: error.message });
    }

    console.log("‚úÖ Deployment successful");
    res.json({ success: true, message: "Deployment completed" });
  });
});

app.get("/health", (req, res) => {
  res.json({ status: "ok", timestamp: new Date().toISOString() });
});

const PORT = 3000;
app.listen(PORT, () => {
  console.log(`üöÄ Webhook listener running on port ${PORT}`);
});
```

6. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —á–µ—Ä–µ–∑ PM2**
```bash
cd /root/flowbot
pm2 start ecosystem.config.js

cd /root/webhook
pm2 start index.js --name webhook

pm2 save
pm2 startup
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Webhook

1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ GitHub
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings ‚Üí Webhooks ‚Üí Add webhook**
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook:
   - **Payload URL:** `http://your-vps-ip:3000/webhook`
   - **Content type:** `application/json`
   - **Events:** –í—ã–±–µ—Ä–∏—Ç–µ "Just the push event"
   - **Active:** ‚úì

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–∂–¥—ã–π `git push` –≤ main –≤–µ—Ç–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –Ω–∞ VPS
2. –í—ã–ø–æ–ª–Ω—è–µ—Ç `git pull` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`npm install`)
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ —á–µ—Ä–µ–∑ PM2 —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–í–∞–∂–Ω–æ:** ecosystem.config.js —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å dotenv - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è PM2 –Ω–∞–ø—Ä—è–º—É—é, –∞ –Ω–µ —á–µ—Ä–µ–∑ .env —Ñ–∞–π–ª.

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PM2

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
pm2 status

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
pm2 logs flowbot
pm2 logs webhook

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart flowbot
pm2 restart webhook

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
pm2 stop flowbot
```

#### –î–æ—Å—Ç—É–ø –∫ VPS —á–µ—Ä–µ–∑ MCP (Model Context Protocol)

–î–ª—è —É–¥–æ–±–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPS —á–µ—Ä–µ–∑ Claude Code –Ω–∞—Å—Ç—Ä–æ–µ–Ω SSH MCP —Å–µ—Ä–≤–µ—Ä.

**–ß—Ç–æ —Ç–∞–∫–æ–µ MCP:**
- MCP (Model Context Protocol) - —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤ –∫ –≤–Ω–µ—à–Ω–∏–º —Å–∏—Å—Ç–µ–º–∞–º
- –ü–æ–∑–≤–æ–ª—è–µ—Ç Claude –Ω–∞–ø—Ä—è–º—É—é –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –¥–µ–ø–ª–æ—è, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π MCP —Å–µ—Ä–≤–µ—Ä:**
- **ssh-mcp** –æ—Ç [tufantunc](https://github.com/tufantunc/ssh-mcp)
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ SSH-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VPS
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∏ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Claude Desktop:**

–§–∞–π–ª `~/.claude/claude_desktop_config.json`:
```json
{
  "mcpServers": {
    "ssh-vps": {
      "command": "npx",
      "args": [
        "-y",
        "ssh-mcp",
        "--host=5.129.224.93",
        "--port=22",
        "--user=root",
        "--password=eyT@w7pZQ7sEzr",
        "--timeout=60000"
      ]
    }
  }
}
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Claude Code:**

MCP —Å–µ—Ä–≤–µ—Ä—ã –ù–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ–∂–¥—É Claude Desktop –∏ Claude Code. –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ Claude Code –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
claude mcp add --transport stdio ssh-vps -- npx -y ssh-mcp \
  --host=5.129.224.93 \
  --port=22 \
  --user=root \
  --password=eyT@w7pZQ7sEzr \
  --timeout=60000
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ MCP:**
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –Ω–∞ VPS (—á–µ—Ä–µ–∑ `sshpass`)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**

–ï—Å–ª–∏ MCP –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π SSH:
```bash
ssh root@5.129.224.93
# –∏–ª–∏
sshpass -p 'eyT@w7pZQ7sEzr' ssh root@5.129.224.93
```

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ MCP:**

Claude Code –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ MCP:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
pm2 status

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–µ–ø–ª–æ—è
pm2 logs webhook --lines 50 --nostream

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
top -bn1 | head -20

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Node.js
node --version
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ü–∞—Ä–æ–ª—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ MCP. –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSH-–∫–ª—é—á–∏ –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è
2. –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ IP —á–µ—Ä–µ–∑ firewall
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å sudo –≤–º–µ—Å—Ç–æ root-–¥–æ—Å—Ç—É–ø–∞
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–µ–ø–ª–æ—è

### Heroku (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
```bash
heroku create flowbot-app
heroku addons:create heroku-redis:hobby-dev
git push heroku main
```

### Docker (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
```bash
docker build -t flowbot .
docker run -d --env-file .env flowbot
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç:
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
- `error.log` - –æ—à–∏–±–∫–∏
- `combined.log` - –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
- PM2 –ª–æ–≥–∏ –Ω–∞ VPS: `/root/.pm2/logs/`

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Telegram 401 Unauthorized –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `TELEGRAM_BOT_TOKEN` –≤ `.env` —Ñ–∞–π–ª–µ –±–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É 401.

**–ü—Ä–∏—á–∏–Ω–∞:** `dotenv` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ—Ü–µ—Å—Å–∞. PM2 restart –Ω–µ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ `.env`.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ecosystem.config.js` –¥–ª—è —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `ecosystem.config.js` (—Å–º. —Ä–∞–∑–¥–µ–ª –î–µ–ø–ª–æ–π)
2. –£–∫–∞–∂–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Å–µ–∫—Ü–∏–∏ `env`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ PM2:
```bash
pm2 delete flowbot
pm2 start ecosystem.config.js
pm2 save
```

### Telegram 409 Conflict: terminated by other getUpdates

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É "Conflict: terminated by other getUpdates request".

**–ü—Ä–∏—á–∏–Ω–∞:** –î—Ä—É–≥–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞ —Å —Ç–µ–º –∂–µ —Ç–æ–∫–µ–Ω–æ–º —É–∂–µ –∑–∞–ø—É—â–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ).

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –±–æ—Ç–∞
2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã
3. –£–¥–∞–ª–∏—Ç–µ webhook (–µ—Å–ª–∏ –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω):
```bash
curl "https://api.telegram.org/bot<YOUR_TOKEN>/deleteWebhook?drop_pending_updates=true"
```
4. –ö–∞–∫ –∫—Ä–∞–π–Ω—è—è –º–µ—Ä–∞ - —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –±–æ—Ç —á–µ—Ä–µ–∑ @BotFather –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω

### PM2 –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ `git pull` –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è.

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ webhook –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
```bash
pm2 restart ecosystem.config.js  # –ù–ï –ø—Ä–æ—Å—Ç–æ "pm2 restart flowbot"
```

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ PM2 –ø–µ—Ä–µ—á–∏—Ç–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –ª—é–±–æ–π –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞!

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add AmazingFeature'`)
4. Push –≤ branch (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º–æ—Ç—Ä–∏—Ç–µ `LICENSE` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- Telegram: [@flowbot_support](https://t.me/flowbot_support)
- Email: support@flowbot.ai
- GitHub Issues: [–°–æ–∑–¥–∞—Ç—å issue](https://github.com/yourusername/flowbot/issues)

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [Mihaly Csikszentmihalyi](https://en.wikipedia.org/wiki/Mihaly_Csikszentmihalyi) - –∑–∞ —Ç–µ–æ—Ä–∏—é –ø–æ—Ç–æ–∫–∞
- [BJ Fogg](https://www.bjfogg.com/) - –∑–∞ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—é Tiny Habits
- [OpenAI](https://openai.com) - –∑–∞ GPT API
- [Supabase](https://supabase.com) - –∑–∞ –æ—Ç–ª–∏—á–Ω—ã–π BaaS

---

**Made with ‚ù§Ô∏è by Aleksey Rodkin**
